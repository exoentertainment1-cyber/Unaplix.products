<!DOCTYPE html>
<html>
<head>
<title>Unaplix Secure Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  height:100vh;
  background:url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&w=1600&q=80') no-repeat center center/cover;
}

.overlay{
  background:rgba(0,0,0,0.85);
  width:100%;
  height:100%;
  position:fixed;
  top:0;
  left:0;
  z-index:1;
}

.login-box{
  position:absolute;
  z-index:2;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:rgba(15,23,42,0.95);
  padding:40px;
  border-radius:15px;
  width:300px;
  text-align:center;
  box-shadow:0 0 30px rgba(0,255,255,0.3);
}

.lock{
  font-size:50px;
  margin-bottom:20px;
}

h2{
  color:#fff;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:10px;
  border:none;
  border-radius:6px;
  margin-bottom:15px;
  font-size:14px;
}

button{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  background:#00ffff;
  color:#000;
  font-weight:bold;
  cursor:pointer;
  margin:3px;
}

button:hover{
  background:#00cccc;
}

.error{
  color:red;
  font-size:13px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="overlay" id="overlay"></div>

<div class="login-box" id="loginPage">
  <div class="lock">üîê</div>
  <h2>Admin Secure Login</h2>
  <input type="password" id="password" placeholder="Enter Admin Password">
  <button onclick="login()">Login</button>
  <div class="error" id="errorMsg"></div>
</div>

<div id="dashboard" style="display:none; position:relative; z-index:5;"></div>

<script>
function login(){
  const pass = document.getElementById("password").value;
  const error = document.getElementById("errorMsg");

  if(pass === "madan2009@unaplix"){
      document.getElementById("overlay").style.display="none";
      document.getElementById("loginPage").style.display="none";
      document.getElementById("dashboard").style.display="block";
      loadDashboard();
  } else {
      error.innerText = "‚ùå Incorrect Password";
  }
}
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, getDocs, doc, updateDoc } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDFrySE90eGW4KKTH0xRCVwdb97EQOY8NE",
  authDomain: "unaplix-products.firebaseapp.com",
  projectId: "unaplix-products",
  storageBucket: "unaplix-products.firebasestorage.app",
  messagingSenderId: "576487097704",
  appId: "1:576487097704:web:ee308d4bd0552034dfc2dd"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.loadDashboard = async function(){

  document.getElementById("dashboard").innerHTML = `
  <div style="background:#0f172a;color:white;padding:20px;text-align:center;font-size:22px;font-weight:bold;">
    UNAPLIX ADMIN DASHBOARD
  </div>
  <div style="padding:20px;">
  <table style="width:100%;background:white;border-collapse:collapse;">
  <thead>
  <tr style="background:#0f172a;color:white;">
    <th style="padding:10px;">Customer</th>
    <th style="padding:10px;">Product</th>
    <th style="padding:10px;">Price</th>
    <th style="padding:10px;">Address</th>
    <th style="padding:10px;">Phone</th>
    <th style="padding:10px;">Status</th>
    <th style="padding:10px;">Action</th>
  </tr>
  </thead>
  <tbody id="orderList"></tbody>
  </table>
  </div>
  `;

  const table = document.getElementById("orderList");
  const querySnapshot = await getDocs(collection(db, "orders"));

  querySnapshot.forEach((docSnap) => {
    const order = docSnap.data();
    const id = docSnap.id;

    table.innerHTML += `
    <tr>
      <td style="padding:10px;">${order.customer}</td>
      <td style="padding:10px;">${order.product}</td>
      <td style="padding:10px;">‚Çπ${order.price}</td>
      <td style="padding:10px;">${order.address || "-"}</td>
      <td style="padding:10px;">${order.phone || "-"}</td>
      <td style="padding:10px;">${order.status}</td>
      <td style="padding:10px;">
        <button onclick="updateStatus('${id}','Delivered')">Deliver</button>
        <button onclick="updateStatus('${id}','Cancelled')">Cancel</button>
      </td>
    </tr>
    `;
  });

  window.updateStatus = async function(id,newStatus){
    const orderRef = doc(db,"orders",id);
    await updateDoc(orderRef,{status:newStatus});
    alert("Status Updated");
    location.reload();
  }
}
</script>

</body>
</html>
